<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venda de Rem√©dios</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        #form-container {
            max-width: 500px;
            width: 100%;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            color: #333;
        }
        .form-title {
            font-size: 24px;
            color: #d9534f;
            margin-bottom: 10px;
            font-weight: bold;
            text-align: center;
        }
        .form-field {
            margin-bottom: 15px;
        }
        .form-label {
            font-weight: bold;
            color: #555;
            display: block;
            margin-bottom: 5px;
        }
        .form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        button {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
            margin: 20px auto 0;
            font-weight: bold;
        }
        button:hover {
            background-color: #0056b3;
        }
        .embed-output, .data-display {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #007BFF;
            border-radius: 5px;
            background-color: #e7f3fe;
            max-height: 300px;
            overflow: auto;
        }
    </style>
</head>
<body>

    <div id="form-container">
        <div class="form-title">üíä Formul√°rio de Venda</div>
        
        <div class="form-field">
            <label class="form-label">üë§ Nome do Cliente:</label>
            <input type="text" id="clientName" class="form-input" required>
        </div>
        <div class="form-field">
            <label class="form-label">üÜî N√∫mero do Passaporte:</label>
            <input type="text" id="passportNumber" class="form-input" required>
        </div>
        <div class="form-field">
            <label class="form-label">üì¶ Quantidade Vendida:</label>
            <input type="number" id="soldQuantity" class="form-input" required>
        </div>
        <div class="form-field">
            <label class="form-label">üíµ Valor por Rem√©dio:</label>
            <input type="number" id="Rem√©dioValue" class="form-input" required>
        </div>
        <div class="form-field">
            <label class="form-label">ü©∫ Nome do M√©dico:</label>
            <input type="text" id="doctorName" class="form-input" required>
        </div>
        <div class="form-field">
            <label class="form-label">üÜî ID do M√©dico:</label>
            <input type="number" id="doctorId" class="form-input" required>
        </div>
        
        <button id="generateEmbed">Gerar Embed</button>

        <div class="embed-output" id="embedOutput" style="display:none;"></div>
        <div class="data-display" id="dataDisplay" style="display:none;"></div>

        <button id="sendWebhook" style="margin-top: 10px;">Enviar Dados</button>
    </div>

    <script>
        document.getElementById("generateEmbed").addEventListener("click", function() {
            const clientName = document.getElementById("clientName").value;
            const passportNumber = document.getElementById("passportNumber").value;
            const soldQuantity = parseFloat(document.getElementById("soldQuantity").value);
            const Rem√©dioValue = parseFloat(document.getElementById("Rem√©dioValue").value);
            const doctorName = document.getElementById("doctorName").value;
            const doctorId = document.getElementById("doctorId").value;

            const totalAmount = soldQuantity * Rem√©dioValue; // C√°lculo do total da venda
            const taxAmount = totalAmount * 0.40; // C√°lculo do imposto (40%)
            const taxId = 7; // ID do imposto
            const accumulatedSales = totalAmount; // Total acumulado de vendas (pode ser modificado conforme necess√°rio)
            const accumulatedTaxes = taxAmount; // Total acumulado de impostos

            // Exibe os dados formatados
            const dataDisplay = document.getElementById("dataDisplay");
            dataDisplay.innerHTML = `
                <strong>Detalhes da Venda:</strong><br>
                üë§ Nome do Cliente: ${clientName}<br>
                üÜî N√∫mero do Passaporte: ${passportNumber}<br>
                üì¶ Quantidade Vendida: ${soldQuantity}<br>
                üíµ Valor por Rem√©dio: R$ ${parseFloat(Rem√©dioValue).toFixed(2)}<br>
                üí∞ Total a Pagar: R$ ${parseFloat(totalAmount).toFixed(2)}<br>
                ‚ö†Ô∏è Imposto Calculado (40%): R$ ${parseFloat(taxAmount).toFixed(2)}<br>
                ü©∫ Nome do M√©dico: ${doctorName}<br>
                üÜî ID do M√©dico: ${doctorId}<br>
                üìë ID do Imposto: ${taxId}<br>
                üíº Total Acumulado de Vendas: R$ ${accumulatedSales.toFixed(2)}<br>
                üí∏ Total Acumulado de Impostos: R$ ${accumulatedTaxes.toFixed(2)}
            `;
            dataDisplay.style.display = 'block'; // Exibe a se√ß√£o de dados formatados

            // Cria√ß√£o do embed para o webhook
            const payload = {
                embeds: [{
                    color: 3447003,
                    author: {
                        name: "üíä Venda Registrada",
                        icon_url: "https://cdn-icons-png.flaticon.com/128/17705/17705887.png"
                    },
                    description: "Os detalhes da venda s√£o os seguintes:",
                    fields: [
                        { name: "üë§ Nome do Cliente", value: clientName, inline: true },
                        { name: "üÜî N√∫mero do Passaporte", value: passportNumber, inline: true },
                        { name: "üì¶ Quantidade Vendida", value: soldQuantity, inline: true },
                        { name: "üíµ Valor por Rem√©dio", value: `R$ ${parseFloat(Rem√©dioValue).toFixed(2)}`, inline: true },
                        { name: "üí∞ Total a Pagar", value: `R$ ${parseFloat(totalAmount).toFixed(2)}`, inline: true },
                        { name: "‚ö†Ô∏è Imposto Calculado (40%)", value: `R$ ${parseFloat(taxAmount).toFixed(2)}`, inline: true },
                        { name: "ü©∫ Nome do M√©dico", value: doctorName, inline: true },
                        { name: "üÜî ID do M√©dico", value: doctorId, inline: true },
                        { name: "üìë ID do Imposto", value: taxId, inline: true },
                        { name: "üíº Total Acumulado de Vendas", value: `R$ ${accumulatedSales.toFixed(2)}`, inline: true },
                        { name: "üí∏ Total Acumulado de Impostos", value: `R$ ${accumulatedTaxes.toFixed(2)}`, inline: true }
                    ],
                    footer: {
                        text: "Registro gerado automaticamente",
                        icon_url: "https://cdn-icons-png.flaticon.com/128/17705/17705887.png"
                    },
                    timestamp: new Date().toISOString()
                }]
            };

            // Mostra a sa√≠da do embed (opcional)
            const embedOutput = document.getElementById("embedOutput");
            embedOutput.innerText = JSON.stringify(payload, null, 2); // Formata o JSON com recuos
            embedOutput.style.display = 'block'; // Exibe a se√ß√£o de sa√≠da do embed
        });

        document.getElementById("sendWebhook").addEventListener("click", function() {
            const payload = {
                embeds: [{
                    color: 3447003,
                    author: {
                        name: "üíä Venda Registrada",
                        icon_url: "https://cdn-icons-png.flaticon.com/128/17705/17705887.png"
                    },
                    description: "Os detalhes da venda s√£o os seguintes:",
                    fields: [
                        { name: "üë§ Nome do Cliente", value: document.getElementById("clientName").value, inline: true },
                        { name: "üÜî N√∫mero do Passaporte", value: document.getElementById("passportNumber").value, inline: true },
                        { name: "üì¶ Quantidade Vendida", value: document.getElementById("soldQuantity").value, inline: true },
                        { name: "üíµ Valor por Rem√©dio", value: `R$ ${parseFloat(document.getElementById("Rem√©dioValue").value).toFixed(2)}`, inline: true },
                        { name: "üí∞ Total a Pagar", value: `R$ ${(parseFloat(document.getElementById("soldQuantity").value) * parseFloat(document.getElementById("Rem√©dioValue").value)).toFixed(2)}`, inline: true },
                        { name: "‚ö†Ô∏è Imposto Calculado (40%)", value: `R$ ${((parseFloat(document.getElementById("soldQuantity").value) * parseFloat(document.getElementById("Rem√©dioValue").value)) * 0.40).toFixed(2)}`, inline: true },
                        { name: "ü©∫ Nome do M√©dico", value: document.getElementById("doctorName").value, inline: true },
                        { name: "üÜî ID do M√©dico", value: document.getElementById("doctorId").value, inline: true },
                        { name: "üìë ID do Imposto", value: 7, inline: true },
                        { name: "üíº Total Acumulado de Vendas", value: `R$ ${0.00.toFixed(2)}`, inline: true }, // Modifique conforme necess√°rio
                        { name: "üí∏ Total Acumulado de Impostos", value: `R$ ${0.00.toFixed(2)}`, inline: true } // Modifique conforme necess√°rio
                    ],
                    footer: {
                        text: "Registro gerado automaticamente",
                        icon_url: "https://cdn-icons-png.flaticon.com/128/17705/17705887.png"
                    },
                    timestamp: new Date().toISOString()
                }]
            };

            fetch('https://discord.com/api/webhooks/1302297331449725050/-79XhjOQYiiSNBaOq0A9WQezJ5lD-rywn3I5jgrDdRl2wJ_-iZOvpyVosShzJO2kq-OG', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(payload)
            })
            .then(response => {
                if (response.ok) {
                    alert("Dados enviados com sucesso!");
                } else {
                    alert("Erro ao enviar os dados.");
                }
            })
            .catch(error => {
                console.error('Erro:', error);
                alert("Erro ao enviar os dados.");
            });
        });
    </script>
</body>
</html>
